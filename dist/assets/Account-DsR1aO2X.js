import{_ as X,D as H,r as b,c as J,o as Y,z as Z,a as _,b as w,d as o,e as a,G as ee,t as g,u as l,j as f,w as s,h as p,g as i,E as m,f as U,O as C,n as B,P as ae,F as I,l as le,Q as L,V as T,U as c,a4 as z,a5 as S,X as P,m as v,I as te}from"./index-COfldkwK.js";import{r as h,g as se,s as oe,a as de,d as re,b as $,c as ne,e as ue}from"./account-QIE51ytO.js";import"./index-B9ygI19o.js";const ie={class:"users-page"},ce={class:"header-row"},ve={class:"page-title"},pe={class:"header-actions"},me={class:"filter-section"},be={class:"name-with-status"},fe={class:"operation-buttons"},ge={class:"user-cards mobile-cards"},we={class:"card-row data-row"},Ve={class:"card-cell"},ye={class:"cell-value name-with-status"},Ee={class:"card-cell"},Ae={class:"cell-value"},_e={class:"card-row data-row"},Ce={class:"card-cell"},xe={class:"cell-value"},Se={class:"card-cell"},ke={class:"cell-value"},De={class:"card-row data-row"},Ue={class:"card-cell",style:{"grid-column":"1 / -1"}},he={class:"cell-value"},Ne={class:"card-row data-row"},Me={class:"card-cell action-cell",style:{"grid-column":"1 / -1"}},Fe={class:"cell-value"},Re={class:"action-buttons"},Be={class:"dialog-footer"},Ie={class:"dialog-footer"},Le=Object.assign({name:"Account"},{__name:"Account",setup(Te){H();const N=b([]),M=b(!1),V=b(""),x=b(""),y=b(!1),E=b(!1),O=b(0),r=b({name:"",account:"",password:"",role:"Supervisor",status:"Enable",detail:""}),n=b({id:0,name:"",account:"",password:"",role:"Supervisor",status:"Enable",detail:""}),A=async()=>{M.value=!0;try{const d=x.value?h[x.value]:void 0,e=await se(d);e.data.ret===0&&e.data.ret_data?N.value=e.data.ret_data.map(u=>({id:u.id,name:u.name,account:u.account,role:u.role_id&&de[u.role_id]||"-",roleId:u.role_id,status:oe[u.status]||"Active",statusValue:u.status,detail:u.detail||"",employmentStatus:u.status===1?"active":"inactive"})):(console.error("Failed to fetch account list:",e.data.msg),v.error("Failed to fetch account list"))}catch(d){console.error("Error fetching account list:",d),v.error("Error fetching account list")}finally{M.value=!1}},j=()=>{r.value={name:"",account:"",password:"",role:"Supervisor",status:"Enable",detail:""},y.value=!0},G=async()=>{if(!r.value.name||!r.value.account||!r.value.password){v.warning("Please fill in all required fields");return}try{const d={role_id:h[r.value.role]||3,name:r.value.name,account:r.value.account,password:r.value.password,detail:r.value.detail||"",status:$[r.value.status]||1},e=await ne(d);e.data.ret===0?(v.success("Account added successfully"),y.value=!1,A()):v.error(e.data.msg||"Failed to add account")}catch(d){console.error("Error adding account:",d),v.error("Error adding account")}},F=d=>{n.value={id:d.id,name:d.name,account:d.account,password:"",role:d.role||"Supervisor",status:d.statusValue===1?"Enable":"Disable",detail:d.detail||""},E.value=!0},Q=async()=>{try{const d={role_id:h[n.value.role]||3,id:n.value.id,password:n.value.password||"",detail:n.value.detail||"",status:$[n.value.status]||1},e=await ue(d);e.data.ret===0?(v.success("Account updated successfully"),E.value=!1,A()):v.error(e.data.msg||"Failed to update account")}catch(d){console.error("Error updating account:",d),v.error("Error updating account")}},R=d=>{te.confirm("Are you sure you want to delete this account?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{try{const e={role_id:3,id:d.id},u=await re(e);u.data.ret===0?(v.success("Account deleted successfully"),A()):v.error(u.data.msg||"Failed to delete account")}catch(e){console.error("Error deleting account:",e),v.error("Error deleting account")}}).catch(()=>{})},W=()=>{A()},k=J(()=>{let d=N.value;return V.value&&(d=d.filter(e=>e.name.toLowerCase().includes(V.value.toLowerCase())||e.account.toLowerCase().includes(V.value.toLowerCase()))),d}),q={backgroundColor:"#0C306C",color:"#fff",fontWeight:"bold"};return Y(()=>{A()}),(d,e)=>{const u=Z("router-link");return w(),_(I,null,[o("div",ie,[o("div",ce,[o("h1",ve,"Account ("+g(k.value.length)+")",1),o("div",pe,[a(l(f),{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=t=>V.value=t),placeholder:"Search",style:{width:"200px"},clearable:""},null,8,["modelValue"]),a(u,{to:"/Permissions"},{default:s(()=>[a(l(p),{type:"primary",plain:"",class:"permissions-header-btn"},{default:s(()=>[...e[18]||(e[18]=[i("Permissions",-1)])]),_:1})]),_:1}),a(l(p),{type:"primary",class:"add-user-btn",onClick:j},{default:s(()=>[...e[19]||(e[19]=[i("Add New Account",-1)])]),_:1})])]),o("div",me,[a(l(U),{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=t=>x.value=t),placeholder:"All Roles",clearable:"",style:{width:"200px"},onChange:W},{default:s(()=>[a(l(m),{label:"All Roles",value:""}),a(l(m),{label:"Admin",value:"Admin"}),a(l(m),{label:"Manager",value:"Manager"}),a(l(m),{label:"Supervisor",value:"Supervisor"})]),_:1},8,["modelValue"])]),(w(),ee(l(ae),{key:O.value,data:k.value,"header-cell-style":q,class:"users-table desktop-table"},{default:s(()=>[a(l(C),{prop:"name",label:"Name","min-width":"120"},{default:s(t=>[o("div",be,[(w(),_("svg",{class:B(["status-icon",t.row.employmentStatus==="active"?"status-active":"status-inactive"]),viewBox:"0 0 24 24",fill:"currentColor"},[...e[20]||(e[20]=[o("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},null,-1)])],2)),o("span",null,g(t.row.name),1)])]),_:1}),a(l(C),{prop:"account",label:"Account","min-width":"100"}),a(l(C),{prop:"role",label:"Role","min-width":"110"}),a(l(C),{prop:"status",label:"Status","min-width":"90"}),a(l(C),{label:"Operation",align:"center","min-width":"220"},{default:s(t=>[o("div",fe,[a(l(p),{type:"primary",plain:"",class:"edit-btn",onClick:D=>F(t.row)},{default:s(()=>[...e[21]||(e[21]=[i(" Edit ",-1)])]),_:1},8,["onClick"]),a(l(p),{type:"danger",plain:"",class:"delete-btn",onClick:D=>R(t.row)},{default:s(()=>[...e[22]||(e[22]=[i(" Delete ",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),o("div",ge,[(w(!0),_(I,null,le(k.value,(t,D)=>(w(),_("div",{key:D,class:"user-card"},[e[28]||(e[28]=L('<div class="card-row header-row-card" data-v-bec8da93><div class="card-cell" data-v-bec8da93><div class="cell-label" data-v-bec8da93>Name</div></div><div class="card-divider-vertical" data-v-bec8da93></div><div class="card-cell" data-v-bec8da93><div class="cell-label" data-v-bec8da93>Account</div></div></div>',1)),o("div",we,[o("div",Ve,[o("div",ye,[(w(),_("svg",{class:B(["status-icon",t.employmentStatus==="active"?"status-active":"status-inactive"]),viewBox:"0 0 24 24",fill:"currentColor"},[...e[23]||(e[23]=[o("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},null,-1)])],2)),o("span",null,g(t.name),1)])]),e[24]||(e[24]=o("div",{class:"card-divider-vertical"},null,-1)),o("div",Ee,[o("div",Ae,g(t.account),1)])]),e[29]||(e[29]=L('<div class="card-row header-row-card" data-v-bec8da93><div class="card-cell" data-v-bec8da93><div class="cell-label" data-v-bec8da93>Role</div></div><div class="card-divider-vertical" data-v-bec8da93></div><div class="card-cell" data-v-bec8da93><div class="cell-label" data-v-bec8da93>Status</div></div></div>',1)),o("div",_e,[o("div",Ce,[o("div",xe,g(t.role),1)]),e[25]||(e[25]=o("div",{class:"card-divider-vertical"},null,-1)),o("div",Se,[o("div",ke,g(t.status),1)])]),e[30]||(e[30]=o("div",{class:"card-row header-row-card"},[o("div",{class:"card-cell",style:{"grid-column":"1 / -1"}},[o("div",{class:"cell-label"},"Detail")])],-1)),o("div",De,[o("div",Ue,[o("div",he,g(t.detail||"-"),1)])]),e[31]||(e[31]=o("div",{class:"card-row header-row-card"},[o("div",{class:"card-cell",style:{"grid-column":"1 / -1"}},[o("div",{class:"cell-label"},"Operation")])],-1)),o("div",Ne,[o("div",Me,[o("div",Fe,[o("div",Re,[a(l(p),{type:"primary",plain:"",class:"edit-btn-mobile",onClick:K=>F(t)},{default:s(()=>[...e[26]||(e[26]=[i(" Edit ",-1)])]),_:1},8,["onClick"]),a(l(p),{type:"danger",plain:"",class:"delete-btn-mobile",onClick:K=>R(t)},{default:s(()=>[...e[27]||(e[27]=[i(" Delete ",-1)])]),_:1},8,["onClick"])])])])])]))),128))])]),a(l(P),{modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=t=>y.value=t),title:"Add New Account",width:"565px",style:{"--you-dialog-width":"565px","font-weight":"700",color:"#000",gap:"28px","border-radius":"24px","padding-top":"52px","padding-right":"24px","padding-bottom":"52px","padding-left":"24px"},"custom-class":"custom-dialog"},{footer:s(()=>[o("span",Be,[a(l(p),{type:"default",class:"cancel",onClick:e[8]||(e[8]=t=>y.value=!1)},{default:s(()=>[...e[34]||(e[34]=[i("Cancel",-1)])]),_:1}),a(l(p),{type:"primary",class:"save-btn",onClick:G},{default:s(()=>[...e[35]||(e[35]=[i("Save",-1)])]),_:1})])]),default:s(()=>[a(l(T),{"label-position":"top",class:"account-form"},{default:s(()=>[a(l(c),{label:"Name *"},{default:s(()=>[a(l(f),{modelValue:r.value.name,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value.name=t),placeholder:"Enter name"},null,8,["modelValue"])]),_:1}),a(l(c),{label:"Account *"},{default:s(()=>[a(l(f),{modelValue:r.value.account,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value.account=t),placeholder:"Enter account"},null,8,["modelValue"])]),_:1}),a(l(c),{label:"Password *"},{default:s(()=>[a(l(f),{modelValue:r.value.password,"onUpdate:modelValue":e[4]||(e[4]=t=>r.value.password=t),type:"password",placeholder:"Enter password"},null,8,["modelValue"])]),_:1}),a(l(c),{label:"Role *"},{default:s(()=>[a(l(U),{modelValue:r.value.role,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value.role=t),placeholder:"Select role",clearable:""},{default:s(()=>[a(l(m),{label:"Admin",value:"Admin"}),a(l(m),{label:"Manager",value:"Manager"}),a(l(m),{label:"Supervisor",value:"Supervisor"})]),_:1},8,["modelValue"])]),_:1}),a(l(c),{label:"Status *"},{default:s(()=>[a(l(z),{modelValue:r.value.status,"onUpdate:modelValue":e[6]||(e[6]=t=>r.value.status=t),class:"enable-disable-radio-group"},{default:s(()=>[a(l(S),{label:"Enable",class:"status-radio"},{default:s(()=>[...e[32]||(e[32]=[i("Enable",-1)])]),_:1}),a(l(S),{label:"Disable",class:"status-radio"},{default:s(()=>[...e[33]||(e[33]=[i("Disable",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l(c),{label:"Detail Description"},{default:s(()=>[a(l(f),{modelValue:r.value.detail,"onUpdate:modelValue":e[7]||(e[7]=t=>r.value.detail=t),type:"textarea",rows:3,placeholder:"Enter detail description"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(l(P),{modelValue:E.value,"onUpdate:modelValue":e[17]||(e[17]=t=>E.value=t),title:"Edit Account",width:"565px",style:{"--you-dialog-width":"565px","font-weight":"700",color:"#000",gap:"28px","border-radius":"24px","padding-top":"52px","padding-right":"24px","padding-bottom":"52px","padding-left":"24px"},"custom-class":"custom-dialog"},{footer:s(()=>[o("span",Ie,[a(l(p),{type:"default",class:"cancel",onClick:e[16]||(e[16]=t=>E.value=!1)},{default:s(()=>[...e[38]||(e[38]=[i("Cancel",-1)])]),_:1}),a(l(p),{type:"primary",class:"save-btn",onClick:Q},{default:s(()=>[...e[39]||(e[39]=[i("Save",-1)])]),_:1})])]),default:s(()=>[a(l(T),{"label-position":"top",class:"account-form"},{default:s(()=>[a(l(c),{label:"Name"},{default:s(()=>[a(l(f),{modelValue:n.value.name,"onUpdate:modelValue":e[10]||(e[10]=t=>n.value.name=t),placeholder:"Name",disabled:""},null,8,["modelValue"])]),_:1}),a(l(c),{label:"Account"},{default:s(()=>[a(l(f),{modelValue:n.value.account,"onUpdate:modelValue":e[11]||(e[11]=t=>n.value.account=t),placeholder:"Account",disabled:""},null,8,["modelValue"])]),_:1}),a(l(c),{label:"Password (leave empty to keep current)"},{default:s(()=>[a(l(f),{modelValue:n.value.password,"onUpdate:modelValue":e[12]||(e[12]=t=>n.value.password=t),type:"password",placeholder:"Enter new password"},null,8,["modelValue"])]),_:1}),a(l(c),{label:"Role *"},{default:s(()=>[a(l(U),{modelValue:n.value.role,"onUpdate:modelValue":e[13]||(e[13]=t=>n.value.role=t),placeholder:"Select role",clearable:""},{default:s(()=>[a(l(m),{label:"Admin",value:"Admin"}),a(l(m),{label:"Manager",value:"Manager"}),a(l(m),{label:"Supervisor",value:"Supervisor"})]),_:1},8,["modelValue"])]),_:1}),a(l(c),{label:"Status *"},{default:s(()=>[a(l(z),{modelValue:n.value.status,"onUpdate:modelValue":e[14]||(e[14]=t=>n.value.status=t),class:"enable-disable-radio-group"},{default:s(()=>[a(l(S),{label:"Enable",class:"status-radio"},{default:s(()=>[...e[36]||(e[36]=[i("Enable",-1)])]),_:1}),a(l(S),{label:"Disable",class:"status-radio"},{default:s(()=>[...e[37]||(e[37]=[i("Disable",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l(c),{label:"Detail Description"},{default:s(()=>[a(l(f),{modelValue:n.value.detail,"onUpdate:modelValue":e[15]||(e[15]=t=>n.value.detail=t),type:"textarea",rows:3,placeholder:"Enter detail description"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),Oe=X(Le,[["__scopeId","data-v-bec8da93"]]);export{Oe as default};
