import{a as i}from"./index-B9ygI19o.js";const t=i.create({baseURL:"https://guiz.haomengwl.com/api",timeout:1e4,headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{var o;const a=localStorage.getItem("token");return a&&(e.headers.token=a),console.log("Device API 发送请求:",(o=e.method)==null?void 0:o.toUpperCase(),e.url),console.log("请求数据:",e.data),e},e=>(console.error("请求拦截器错误:",e),Promise.reject(e)));t.interceptors.response.use(e=>(console.log("Device API 收到响应:",e.status,e.data),e.data&&typeof e.data=="object"&&(e.data.ret!==void 0&&console.log("  ✓ ret:",e.data.ret),e.data.code!==void 0&&console.log("  ✓ code:",e.data.code),e.data.msg!==void 0&&console.log("  ✓ msg:",e.data.msg),e.data.ret_data!==void 0&&(console.log("  ✓ ret_data 类型:",Array.isArray(e.data.ret_data)?"Array":typeof e.data.ret_data),Array.isArray(e.data.ret_data)&&console.log("    数据数量:",e.data.ret_data.length))),e),e=>(console.error("Device API 响应错误:",e.message||e),e.response?(console.error("  HTTP 状态码:",e.response.status),console.error("  响应数据:",e.response.data)):e.request?console.error("  没有接收到响应"):console.error("  请求错误:",e.message),Promise.reject(e)));function c(e={}){return t.post("/Devices/devices_list",e)}function r(e){return t.post("/Devices/add_device",e)}function s(e){return t.post("/Devices/edit_device",e)}function l(e){return!e||typeof e.id!="number"||e.id<=0?Promise.reject(new Error("Invalid device id")):t.post("/Devices/del_device",e)}export{r as a,l as d,s as e,c as g};
