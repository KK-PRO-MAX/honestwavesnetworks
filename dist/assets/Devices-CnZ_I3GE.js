import{_ as j,v as O,r as A,g as q,a as K,c as T,b as E,e as s,d as l,t as p,u as a,l as Z,w as r,E as c,h as G,f as y,j as b,I as u,J,F as z,p as H,y as D,K as F}from"./index-Dt4dB-s4.js";import{u as Q}from"./deviceStore-Du32FX0L.js";const X={class:"device-management-page"},Y={class:"header-row"},ee={class:"page-title"},le={class:"header-actions"},ae={class:"filter-section"},se={class:"device-cards mobile-cards"},te={class:"card-row data-row"},de={class:"card-cell"},ie={class:"cell-value"},ce={class:"card-cell"},oe={class:"cell-value"},re={class:"card-cell"},ve={class:"cell-value"},ne={class:"card-row data-row"},ue={class:"card-cell"},pe={class:"cell-value"},me={class:"card-cell"},ye={class:"cell-value"},be={class:"card-cell action-cell"},fe={class:"cell-value"},_e={__name:"Devices",setup(he){const P=O(),f=Q(),C=A(""),_=A("All"),h=A(""),N=A(null),R={backgroundColor:"#C7EDFF",color:"#000",fontWeight:"bold"},B=t=>{P.push({path:"/Devices_all_edit",query:{mode:"edit",deviceName:t.deviceName,deviceId:t.deviceId,deviceType:t.deviceType,assignedBay:t.assignedBay,deviceGroups:t.deviceGroups}})},U=()=>{var t;(t=N.value)==null||t.click()},M=async t=>{const e=t.target.files[0];if(!e)return;const v=new FileReader;v.onload=d=>{var i,m,o,L,V,S,$;try{const k=d.target.result;if(e.name.endsWith(".csv")){const I=k.split(`
`),g=[];for(let w=1;w<I.length;w++)if(I[w].trim()){const n=I[w].split(",");g.push({deviceName:((i=n[0])==null?void 0:i.trim())||"",deviceId:((m=n[1])==null?void 0:m.trim())||"",assignedBay:((o=n[2])==null?void 0:o.trim())||"",deviceType:((L=n[3])==null?void 0:L.trim())||"",deviceGroups:((V=n[4])==null?void 0:V.trim())||"",status:((S=n[5])==null?void 0:S.trim())||"Available",category:(($=n[6])==null?void 0:$.trim())||"A1"})}g.length>0&&(f.deviceList.length=0,f.deviceList.push(...g),D.success(`Successfully imported ${g.length} device records`))}else(e.name.endsWith(".xlsx")||e.name.endsWith(".xls"))&&D.warning("Excel file import requires xlsx library. Please use CSV format or install xlsx library.")}catch(k){console.error("Import failed:",k),D.error("File import failed, please check the file format")}},v.readAsText(e),t.target.value=""},W=()=>{const t="Device Name,Device ID,Assigned Bay,Device Type,Device Groups,Status,Category",e=f.deviceList.map(o=>`${o.deviceName},${o.deviceId},${o.assignedBay},${o.deviceType},${o.deviceGroups},${o.status},${o.category||"A1"}`),v=[t,...e].join(`
`),d=new Blob([v],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),m=URL.createObjectURL(d);i.setAttribute("href",m),i.setAttribute("download",`devices_${new Date().getTime()}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),D.success("Device data exported successfully")},x=q(()=>{const t=C.value.trim().toLowerCase();return f.deviceList.filter(e=>{const v=h.value?e.category===h.value:!0,d=_.value==="All"?!0:e.deviceType===_.value,i=t?e.deviceName.toLowerCase().includes(t)||e.deviceId.toLowerCase().includes(t)||e.deviceType.toLowerCase().includes(t)||e.deviceGroups.toLowerCase().includes(t):!0;return v&&d&&i})});return(t,e)=>{const v=K("router-link");return E(),T("div",X,[s("div",Y,[s("h1",ee,"Devices ("+p(x.value.length)+")",1),s("div",le,[l(a(Z),{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=d=>C.value=d),placeholder:"Search",class:"search-input","prefix-icon":"el-icon-search"},null,8,["modelValue"]),l(a(G),{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=d=>_.value=d),placeholder:"Select type",class:"device-type-select"},{default:r(()=>[l(a(c),{label:"All",value:"All"}),l(a(c),{label:"iPhone",value:"iPhone"}),l(a(c),{label:"iPad",value:"iPad"}),l(a(c),{label:"Laptop",value:"Laptop"}),l(a(c),{label:"Android Phone",value:"Android Phone"}),l(a(c),{label:"Android Tablet",value:"Android Tablet"}),l(a(c),{label:"Zebra",value:"Zebra"})]),_:1},8,["modelValue"]),l(a(b),{class:"import-btn",onClick:U},{default:r(()=>[...e[3]||(e[3]=[y("Import File",-1)])]),_:1}),s("input",{ref_key:"fileInput",ref:N,type:"file",accept:".csv,.xlsx,.xls",style:{display:"none"},onChange:M},null,544),l(a(b),{class:"export-btn",onClick:W},{default:r(()=>[...e[4]||(e[4]=[y("Export File",-1)])]),_:1}),l(v,{to:"/Devices_all_edit"},{default:r(()=>[l(a(b),{type:"primary",class:"add-device-btn"},{default:r(()=>[...e[5]||(e[5]=[y("Add New Device",-1)])]),_:1})]),_:1})])]),s("div",ae,[l(a(G),{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=d=>h.value=d),placeholder:"All Categories",clearable:"",style:{width:"200px"}},{default:r(()=>[l(a(c),{label:"All Categories",value:""}),l(a(c),{label:"A1",value:"A1"}),l(a(c),{label:"A2",value:"A2"}),l(a(c),{label:"A3",value:"A3"}),l(a(c),{label:"A4",value:"A4"})]),_:1},8,["modelValue"])]),l(a(J),{data:x.value,border:"","header-cell-style":R,class:"device-table desktop-table"},{default:r(()=>[l(a(u),{prop:"deviceName",label:"Device Name"}),l(a(u),{prop:"deviceId",label:"Device ID"}),l(a(u),{prop:"assignedBay",label:"Assigned Bay"}),l(a(u),{prop:"deviceType",label:"Device Type"}),l(a(u),{prop:"deviceGroups",label:"Device Groups"}),l(a(u),{prop:"status",label:"Status"}),l(a(u),{label:"Operation",align:"center"},{default:r(d=>[l(a(b),{type:"primary",plain:"",class:"edit-btn",onClick:i=>B(d.row)},{default:r(()=>[...e[6]||(e[6]=[y(" Edit ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),s("div",se,[(E(!0),T(z,null,H(x.value,(d,i)=>(E(),T("div",{key:i,class:"device-card"},[e[12]||(e[12]=F('<div class="card-row header-row-card" data-v-47dc0e4e><div class="card-cell" data-v-47dc0e4e><div class="cell-label" data-v-47dc0e4e>Device Name</div></div><div class="card-divider-vertical" data-v-47dc0e4e></div><div class="card-cell" data-v-47dc0e4e><div class="cell-label" data-v-47dc0e4e>Device ID</div></div><div class="card-divider-vertical" data-v-47dc0e4e></div><div class="card-cell" data-v-47dc0e4e><div class="cell-label" data-v-47dc0e4e>Assigned Bay</div></div></div>',1)),s("div",te,[s("div",de,[s("div",ie,p(d.deviceName),1)]),e[7]||(e[7]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",ce,[s("div",oe,p(d.deviceId),1)]),e[8]||(e[8]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",re,[s("div",ve,p(d.assignedBay),1)])]),e[13]||(e[13]=F('<div class="card-row header-row-card" data-v-47dc0e4e><div class="card-cell" data-v-47dc0e4e><div class="cell-label" data-v-47dc0e4e>Device Type</div></div><div class="card-divider-vertical" data-v-47dc0e4e></div><div class="card-cell" data-v-47dc0e4e><div class="cell-label" data-v-47dc0e4e>Groups</div></div><div class="card-divider-vertical" data-v-47dc0e4e></div><div class="card-cell" data-v-47dc0e4e><div class="cell-label" data-v-47dc0e4e>Action</div></div></div>',1)),s("div",ne,[s("div",ue,[s("div",pe,p(d.deviceType),1)]),e[10]||(e[10]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",me,[s("div",ye,p(d.deviceGroups),1)]),e[11]||(e[11]=s("div",{class:"card-divider-vertical"},null,-1)),s("div",be,[s("div",fe,[l(a(b),{type:"primary",plain:"",class:"edit-btn-mobile",onClick:m=>B(d)},{default:r(()=>[...e[9]||(e[9]=[y(" Edit ",-1)])]),_:1},8,["onClick"])])])])]))),128))])])}}},Ae=j(_e,[["__scopeId","data-v-47dc0e4e"]]);export{Ae as default};
